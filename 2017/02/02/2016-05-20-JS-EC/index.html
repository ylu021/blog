<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> JS执行上下文 · code and eat and drink and life</title><meta name="description" content="JS执行上下文 - YL"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/blog/favicon.png"><link rel="stylesheet" href="/blog/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://lycworks.me/blog/atom.xml" title="code and eat and drink and life"></head><body><div class="wrap"><header><a href="/blog/" class="logo-link"><img src="/blog/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/blog/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/blog/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/blog/tags/" target="_self" class="nav-list-link">TAG</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/blog/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">JS执行上下文</h1><div class="post-info">Feb 2, 2017</div><div class="post-content"><hr>
<h1 id="抽象概念"><a href="#抽象概念" class="headerlink" title="抽象概念"></a>抽象概念</h1><p>而javascript的函数进入执行上下文,里面的局部变量是保存在堆中的一个对象中(VO)  </p>
<h2 id="execution-context-上下文-EC"><a href="#execution-context-上下文-EC" class="headerlink" title="execution context - 上下文/EC"></a>execution context - 上下文/EC</h2><p>  站级结构 Ec3-&gt;2-&gt;1-&gt;global<br>  随着函数的重复调用，会创建新的上下文  </p>
<h2 id="variable-object-变量对象-VO"><a href="#variable-object-变量对象-VO" class="headerlink" title="variable object - 变量对象/VO"></a>variable object - 变量对象/VO</h2><p>  存储EC中的变量<br>  函数声明<br>  函数参数  </p>
<h2 id="激活对象-Arguments-object-AO"><a href="#激活对象-Arguments-object-AO" class="headerlink" title="激活对象 - Arguments object/AO"></a>激活对象 - Arguments object/AO</h2><p>  初始化  </p>
<h2 id="VO"><a href="#VO" class="headerlink" title="VO"></a>VO</h2><ol>
<li>填充顺序/初始化/declare<br>函数参数 - 未传入，初始undefined<br>函数声明 - 命名冲突会覆盖 - 解释它为什么会被前置<br>变量声明 - 初始undefined，命名冲突则忽略，因为都是undefined anyway  </li>
</ol>
<blockquote>
<p>函数表达式不会影响VO的任何填充，thus也不能外部调用<br>var obj = new foo() but foo()-&gt;undefined 科科  </p>
</blockquote>
<ol>
<li><p>代码执行<br>在函数执行前,我们已经知道此函数可以使用哪些变量了，因此直接执行里面的赋值语句<br>当函数执行完后,那么此次在堆中创建的对象就会变成匿名对象  </p>
</li>
<li><p>最终例子  </p>
</li>
</ol>
<p><img src="http://img.mukewang.com/564ae5700001338112800720.jpg" alt="&quot;test&quot;">  </p>
<p>首先，会查看函数声明，如果声明的函数名重复，则覆盖前面声明的函数。<br>接着，查看变量声明，如果变量名重复，则会忽略这次的声明。<br>填充时，不会执行赋值操作。<br>填充完毕后，开始逐行执行。  </p>
<p>填充阶段，先声明了函数x，然后变量x的声明冲突，所以被忽略；变量a、b会被声明为undefined。<br>第一行，会弹出已被赋了函数的x代码；<br>第二行，会将函数x赋值成10。  </p>
<p>区别：</p>
<pre><code>alert(x); //function x(){};
var x = 10;
function x(){};
alert(x); // 10
————————————————————
alert(x); //function x(){};
var x;
function x(){};
alert(x); //function x(){};
</code></pre><blockquote>
<p>匿名函数Anonymous function<br><code>function(){}</code>加上括号就变成了函数表达式<code>(</code>function(){}<code>)</code><br>再加个括号，就变成了立即执行函数…(function(){})<code>()</code></p>
</blockquote>
</div></article></div></main><footer><div class="paginator"><a href="/blog/2017/02/02/2016-05-18-JS-function/" class="prev">上一篇</a><a href="/blog/2017/02/02/2016-05-18-JS-closure/" class="next">下一篇</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'ycluu';
var disqus_identifier = '2017/02/02/2016-05-20-JS-EC/';
var disqus_title = 'JS执行上下文';
var disqus_url = 'http://lycworks.me/blog/2017/02/02/2016-05-20-JS-EC/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//ycluu.disqus.com/count.js" async></script><div class="copyright"><p>© 2015 - 2017 <a href="http://lycworks.me/blog">YL</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>