<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> jquery_and_react · code and eat and drink and life</title><meta name="description" content="jquery_and_react - YL"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/blog/favicon.png"><link rel="stylesheet" href="/blog/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://lycworks.me/blog/atom.xml" title="code and eat and drink and life"></head><body><div class="wrap"><header><a href="/blog/" class="logo-link"><img src="/blog/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/blog/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/blog/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/blog/tags/" target="_self" class="nav-list-link">TAG</a></li><li class="nav-list-item"><a href="http://lycworks.me" target="_blank" class="nav-list-link">WEBSITE</a></li><li class="nav-list-item"><a href="https://github.com/ylu021" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/blog/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">jquery_and_react</h1><div class="post-info">Feb 14, 2017</div><div class="post-content"><h1 id="Foreword"><a href="#Foreword" class="headerlink" title="Foreword"></a>Foreword</h1><p>assume one has previous understanding of react. If you want to understand more about the component’s lifecycle and its methods, click here for <a href="https://facebook.github.io/react/docs/react-component.html" target="_blank" rel="external">documentation</a>.</p>
<h1 id="Why-the-hassle"><a href="#Why-the-hassle" class="headerlink" title="Why the hassle"></a>Why the hassle</h1><p>Even though the trend has become react, there are still a lot of plugins written for jquery. Converting them to pure javascript is painful, so we often prefer to use them directly. How do we embed them in react?</p>
<h3 id="Create-a-react-component"><a href="#Create-a-react-component" class="headerlink" title="Create a react component"></a>Create a react component</h3><p>in our example, we are trying to display a map element inside a div. therefore, we must first create a <code>Map</code> component (customized name), and inside the <code>render</code> function return a <code>div</code> with <code>ref=</code> for easy accessing (like a tag)</p>
<h3 id="componentDidMount"><a href="#componentDidMount" class="headerlink" title="componentDidMount()"></a><code>componentDidMount()</code></h3><p>this is where one puts the jquery activation in here. This method belongs to the <code>Map</code> component. When the map component is rendered, we can access the component through <code>this.refs</code>. we can then use this to pass DOM to jQuery and initialize the plugin. After doing a bunch of research, here is my way of doing it.</p>
<blockquote>
<p>note jquery should only be load once, else error occurs</p>
</blockquote>
<p>First of all, in order for the plugin js file being run after the jQuery module is loaded (<code>npm install jquery</code>), we must declare it after index.html’s <code>&lt;/body&gt;</code> tag.</p>
<p>Then, according to the loading rule, we assign the imported jQuery to <code>window.jQuery</code> at somewhere for global accessing (personally recommend to do this inside <code>componentDidMount()</code>, which is where the jquery plugin is being called).</p>
<blockquote>
<p>what is window.jQuery? It is a global window var that can be accessed by all js files</p>
</blockquote>
<p>Sample code<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">//within a react component&apos;s js file</div><div class="line">import jQuery from &apos;jquery&apos; //npm intall jquery --save</div><div class="line"></div><div class="line">componentDidMount() &#123;</div><div class="line">  window.jQuery = jQuery</div><div class="line">  var jq = window.jQuery</div><div class="line"></div><div class="line">  var _this = this //to be used in below closure</div><div class="line">  const &#123;...config&#125; = this.props</div><div class="line">  jq(document).ready(function() &#123;</div><div class="line">    var map = _this.refs.map</div><div class="line">    console.log(jq(map).vectorMap(config));</div><div class="line">  &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">render() &#123;</div><div class="line">  return (&lt;div id=&quot;map&quot; ref=&quot;map&quot;&gt;&lt;/div&gt;)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<ul>
<li><code>_this.refs.map</code> refers to the <code>&lt;div&gt;</code> with <code>ref=&quot;map&quot;</code></li>
<li><p><code>the document.ready</code> must be called if we want to create the map, but this creates a <a href="http://www.w3schools.com/js/js_function_closures.asp" target="_blank" rel="external">closure</a>, so we need to create a local variable to access the outer <code>this</code> environment</p>
<blockquote>
<p>another short way to do this is simply declaring <code>const { map } = this.refs</code>, which can then be accessed as <code>_this.refs.map</code></p>
</blockquote>
</li>
<li><p>I’m only using a console.log to print out informations related to this method for debug purposes</p>
</li>
<li><code>const {...config} = this.props</code> this is es5 syntax, a oneliner to extract all the properties of this component, and individually assign them, similar to <code>map(arr)</code>.<blockquote>
<p>The properties are  declared at app.js, where the component is rendered <code>&lt;Map map=&quot;continents_mill&quot; regionStyle={region} onRegionClick={this.handleClick} /&gt;</code></p>
</blockquote>
</li>
</ul>
<h3 id="componentWillUnmount"><a href="#componentWillUnmount" class="headerlink" title="componentWillUnmount()"></a><code>componentWillUnmount()</code></h3><p>This is where one cleans up the jquery element. Most of the times, for data reset. This is pretty clear, if you are still confused, visit <a href="https://facebook.github.io/react/docs/react-component.html" target="_blank" rel="external">documentation</a>.</p>
<h3 id="Afterword"><a href="#Afterword" class="headerlink" title="Afterword"></a>Afterword</h3><p>I hope this tutorial is clear and useful, if you have any question or suggestion, feel free to leave a comment below.</p>
</div><div><label>Tags:</label><a href="/blog/tags/javascript/">#javascript</a>| <a href="/blog/tags/react/">#react</a></div></article></div></main><footer><div class="paginator"><a href="/blog/2017/02/14/ux-thinking/" class="prev">PREV</a><a href="/blog/2017/02/10/chrome-plugin-message/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'https-ylu021-github-io-blog';
var disqus_identifier = '2017/02/14/jquery-and-react/';
var disqus_title = 'jquery_and_react';
var disqus_url = 'http://lycworks.me/blog/2017/02/14/jquery-and-react/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//https-ylu021-github-io-blog.disqus.com/count.js" async></script><div class="copyright"><p>© 2017 <a href="http://lycworks.me/blog">YL</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-71046273-3",'auto');ga('send','pageview');</script></body></html>